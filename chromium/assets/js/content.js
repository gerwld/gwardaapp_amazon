//   - This file is part of GwardaApp Extension
//  <https://github.com/gerwld/GwardaApp-extension/blob/main/README.md>,
//   - Copyright (C) 2023-present GwardaApp Extension
//   -
//   - GwardaApp Extension is a software: you can redistribute it, but you are not allowed to modify it under the terms of the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) License.
//   -
//   - GwardaApp Extension is distributed in the hope that it will be useful,
//   - but WITHOUT ANY WARRANTY; without even the implied warranty of
//   - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//   - Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) License for more details.
//   -
//   - You should have received a copy of the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) License
//   - along with GwardaApp Extension.  If not, see <https://creativecommons.org/licenses/by-nc-nd/4.0/>.

// Note: Amazon is a registered trademark of Amazon and all related Marks are Trademarks of Amazon.com, Inc. or its affiliates. This extension is not affiliated with or endorsed by Amazon.com, Inc or / and its affiliates.

console.log(`%c gwardaApp v.0.9.5 beta `, 'background: gray; color: yellow');

!function(){"use strict";function n(n="assets/img/logo.svg"){const e=chrome||(browser||null);return e&&e?.runtime?.getURL(n)||"#"}function e(n,e){let t=a();function a(){if(Array.isArray(n)){let e=[];return n?.forEach((n=>{let t=document.querySelectorAll(n);e=e.concat(Array.from(t))})),e}return document?.querySelectorAll(n)}const s=new MutationObserver((()=>{let n=a();n.length===t.length&&Array.from(n).every(((n,e)=>n===t[e]))||(e(),t=n)}));return s.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),s}function t(n,t,a,s,r,i){let o=0;function l(){if(n){if("root"===s){let n=document.createElement("div");return n.appendChild(t),n.setAttribute("class",a),void document.documentElement.appendChild(n)}const e=document.querySelectorAll(s);if(!e&&n||Array.isArray(s)&&0===e.length)return void(o<5e3&&(setTimeout(l,1e3),o+=1e3));e&&t&&e.forEach((n=>{let e=n.parentElement.classList.contains(a)?n.parentElement:n.querySelector("."+a),s=document.createElement("div");s.appendChild(t.cloneNode(!0)),s.setAttribute("class",a),e&&!i||(i&&e&&e.remove(),r?n.appendChild(s):n.insertBefore(s,n.firstChild))}))}else document.querySelectorAll("."+a).forEach((n=>n.remove()))}l(),e(s,l)}function a(n,e,t){let a="";if(t&&n){a=(chrome||browser).runtime.getURL(n)}else a=n;let s=window.open(a,e);s&&s.focus()}function s(n){return new Promise((e=>setTimeout(e,n)))}function r({title:n,bullets:e,description:t,ratings_total:a,rating_avg:s,images_total:r,brand_content:i,main_dimensions:o,main_bg:l}){let c=1;return n&&n>150&&(c+=1.5),e&&e>4&&(c+=.7),t&&t>1e3&&(c+=.8),t&&t>1400&&(c+=.5),a&&a>10&&(c+=.4),a&&a>100&&(c+=.6),s&&s>4&&(c+=1),s&&s>4.78&&a&&a>50&&(c+=1),r&&r>4&&(c+=.6),r&&r>6&&(c+=.4),i&&i>1&&(c+=.5),o&&o.split(" x")[0]>1420&&(c+=.8),o&&o.split(" x")[0]>1500&&(c+=.2),(l&&"white"===l||"gray"===l)&&(c+=1),"number"==typeof(d=c)&&!isNaN(d)&&Number.isFinite(d)?parseFloat(Math.floor(10*d)/10):NaN;var d}function i(n){return n?(n+="").replace(/<[^>]*>/g,"").trim():null}function o(n){return new Promise((e=>setTimeout(e,n)))}async function l(n,e=document,t=2e3,a=20){let s=0,r={};for(;s<t;){for(const t of n)if(!r[t]){const n=e.querySelector(t);null!==n&&(r[t]=n)}const t=Object.values(r);if(t.length===n.length&&t.every((n=>null!==n)))return Promise.resolve(r);await o(a),s++}const i=function(n){const e={};for(const[t,a]of Object.entries(n))null!==a&&(e[t]=a);return e}(r);return Object.keys(i).length>0?Promise.resolve(i):Promise.resolve({isError:!0})}function c(n){return new Promise(((e,t)=>{if(!n||!n.src)return void e(null);let a=new Image;a.crossOrigin="Anonymous",a.src=n.src,a.onload=function(){let n=document.createElement("canvas");n.width=a.width,n.height=a.height;let t=n.getContext("2d");t.drawImage(a,0,0,a.width,a.height);let s=t.getImageData(0,0,2,1),r=s.data.slice(0,3),i=s.data.slice(4,7),o=function(n){const e={red:[255,0,0],orange:[255,165,0],yellow:[255,255,0],green:[0,128,0],blue:[0,0,255],indigo:[75,0,130],violet:[148,0,211],white:[255,255,255],gray:[128,128,128],black:[0,0,0]};let t="unknown",a=Number.MAX_SAFE_INTEGER;for(const[s,r]of Object.entries(e)){const e=d(n,r);e<a&&(a=e,t=s)}return t}([Math.round((r[0]+i[0])/2),Math.round((r[1]+i[1])/2),Math.round((r[2]+i[2])/2)]);e(o),a=null},a.onerror=()=>{a=null,e(null)}}))}function d(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2))}function p(n){if(!(n instanceof Date)||isNaN(n))return null;return`${(n.getMonth()+1).toString().padStart(2,"0")}/${n.getDate().toString().padStart(2,"0")}/${n.getFullYear()}`}function u(n,e,t=document,a=200,s=200){let o=[...e,"#productTitle","#feature-bullets ul","#productDescription","#acrCustomerReviewText","#averageCustomerReviews","#acrPopover .a-declarative","#altImages>ul","#imgTagWrapperId img","#aplus","#twister","#corePrice_feature_div",'[data-feature-name="merchantInfoFeature"] a'];e=o.filter(((n,e)=>o.indexOf(n)===e));const d=function(n=document){let e=[n.querySelector("#productDetails_feature_div")?.innerHTML||"",n.querySelector("#prodDetails")?.innerHTML||"",n.querySelector("#detailBulletsWithExceptions_feature_div")?.innerHTML||"",n.querySelector("#detailBullets_feature_div")?.innerHTML||"",n.querySelector("#productDetailsNonPets_feature_div")?.innerHTML||"",n.querySelector("#detailBulletsWithExceptions_feature_div")?.innerHTML||"",n.querySelectorAll("#detailBullets_feature_div")?.innerHTML||""].join(" ");const t=["ounces"," ounce"," pound"," pounds"," ton"," tons"," lbs"," gram"," grams"," kilogram"," kilograms"," kg"," milligram"," milligrams"," mg"],a=["inches"," inch"," in"," foot"," feet"," ft"," centimeter"," centimeters"," cm"," meter"," meters"," m"," millimeter"," millimeters"," mm"],s=e.trim().split(/[;:\n\t<>]/).map((n=>n?.replace(/[^a-zA-Z0-9 .\\|\/]/g," ")?.replace(/\s+/g," ")?.trim()?.toLowerCase())).filter(Boolean),r=s.filter((n=>t.some((e=>n.endsWith(e)))&&n.split(" ").some((e=>!isNaN(e)&&""!==n)))),i=s.filter((n=>a.some((e=>n.endsWith(e)&&n.split(" ").some((n=>!isNaN(n)))&&""!==n&&n.includes("x")))));return{weight:r[0],measure:i[0]}}(t)??[],u=function(n=document){const e=[n.querySelector("#productDetails_feature_div")?.innerHTML||"",n.querySelector("#prodDetails")?.innerHTML||"",n.querySelector("#detailBulletsWithExceptions_feature_div")?.innerHTML||"",n.querySelector("#detailBullets_feature_div")?.innerHTML||"",n.querySelector("#productDetailsNonPets_feature_div")?.innerHTML||"",n.querySelector("#detailBulletsWithExceptions_feature_div")?.innerHTML||"",n.querySelectorAll("#detailBullets_feature_div")?.innerHTML||"",n.querySelectorAll("#detailBulletsWrapper_feature_div")?.innerHTML||""].join(" ").toLowerCase().trim().split(/[;:\n\t<>]/).map((n=>n?.replace(/[^a-zA-Z0-9 .\\|\/]/g," ")?.replace(/\s+/g," ")?.trim())).filter(Boolean).filter((n=>{if(3===n.split(" ").length&&2===n.split(" ").filter((n=>!isNaN(n)&&""!==n)).length){const e=new Date(n);return!isNaN(e.getFullYear())}}));return{date:e[0]?p(new Date(e[0])):null}}(t)??[];return new Promise((async(o,p)=>{try{const p=await l(e,t,a,s);if(p&&!0!==p?.isError){let e=p["#altImages>ul"]?.querySelector("li.imageThumbnail img")||null,t=p["#imgTagWrapperId img"]?.getAttribute("data-old-hires")||null;const a=e?await c(e):null,s=t?await async function(n){return new Promise(((e,t)=>{let a=new Image;a.onload=function(){e(`${this.width} x ${this.height}`),a=null},a.onerror=function(){t("1400 x 1400"),a=null},a.src=n}))}(t):null,l={title:p["#productTitle"]?.innerHTML?.trim()?.length||null,bullets:p["#feature-bullets ul"]?.querySelectorAll("li").length||null,description:(i(p["#productDescription"]?.innerHTML)?.length||0)+(i(p["#aplus"]?.innerHTML)?.length||0),ratings_total:p["#acrCustomerReviewText"]&&p["#acrCustomerReviewText"]?.innerText?.replace(",","")?.split(" ")[0]/1||null,rating_avg:parseFloat(i(p["#acrPopover .a-declarative"]?.innerHTML)?.split(" ")[0])||null,images_total:p["#altImages>ul"]?.querySelectorAll("li.imageThumbnail")?.length||null,brand_content:(p["#productDescription"]?.querySelectorAll("img")?.length||0)+(p["#aplus"]?.querySelectorAll("img").length||0)||null,main_dimensions:s||null,main_bg:a||null,variations:p["#twister"]?.querySelectorAll("li")?.length||null,price:p["#corePrice_feature_div"]?.innerText?p["#corePrice_feature_div"]?.innerText?.split(/[;:\n\t<>]/)[0]:null,ms:d,...u,seller:{label:p['[data-feature-name="merchantInfoFeature"] a']?.innerHTML?.trim()||null,link:p['[data-feature-name="merchantInfoFeature"] a']?.href||null}};let g=r(l)||null,_={...l,lqs:g};n&&n(_),o(_)}else o({isError:!0})}catch(n){p(n)}}))}const g=chrome||browser,_=5,w=2e3;let m=!1,f=[],h=[];async function v(n){let e=[...n];g.storage.local.get("gpCache",(n=>{let t=n.gpCache?n.gpCache:[];t.length&&(e=e.filter((n=>!t.some((e=>e.asin===n))))),async function(n,e){if(f.push(...n),f=f.filter(((n,e)=>f.indexOf(n)===e)),!m){m=!0;for(let n=0;n<f.length;n+=_){const e=f.slice(n,n+_).filter((n=>-1===h.indexOf(n)));e&&e.length&&(await g.runtime.sendMessage({action:"fetchData",arr:e},(n=>{b(n)})),await s(w))}m=!1}}(e)}))}async function b(n){n&&n.error||n&&Promise.all(n.map((n=>async function(n){const e=(new DOMParser).parseFromString(n,"text/html");return await u(null,[],e,2,2)}(n.data).then((e=>({asin:n.asin,timestamp:n.timestamp,data:e})))))).then((n=>{!function(n){g.storage.local.get("gpCache",(e=>{let t;t=e&&e.gpCache&&e.gpCache.length?[...e.gpCache,...n]:[...n],g.storage.local.set({gpCache:t})}))}(n),n.forEach((n=>{n?.asin&&h.push(n.asin)}))})).catch((n=>{}))}let y,x=0;function q(n,e,t,a){let s=0;!function e(){const a=document.querySelectorAll(t);!a||Array.isArray(t)&&0===a.length?s<4e3&&(setTimeout(e,400),s+=400):n&&a.forEach((e=>{let t=e.querySelector('[data-type="content"]');e&&"true"!==e.getAttribute("data-initialized")&&t&&(e.setAttribute("data-initialized","true"),t.parentElement.replaceChild(n.cloneNode(!0),t))}))}()}const S=chrome||browser;function k(a){if(window.location.pathname&&"/"!==window.location.pathname&&window.location.pathname.startsWith("/s")){const s="qwv_617330cb-0d46-4305-adba-241c658be85d__gw";function r(e){const t=document.createElement("div");return t.innerHTML=`\n      <div class="qgw qfixgw" data-type="content">\n      <div class="qgw__dl">\n      <div>\n        <span class="qgw__dt">ASIN:</span>\n        <span class="qgw__dd" data-part="asin">${e?.asin||"loading..."}</span>\n      </div>\n      <div>\n        <span class="qgw__dt">LQS:</span>\n        <span class="qgw__dd">${e?.data?.lqs??"loading..."}</span>\n      </div>\n\n      <div>\n        <span class="qgw__dt">Weight:</span>\n        <span class="qgw__dd">${e?.data?.ms?.weight??"-"}</span>\n      </div>\n      <div>\n        <span class="qgw__dt">Rel. date:</span>\n        <span class="qgw__dd">${e?.data?.date??"-"}</span>\n      </div>\n      <div>\n        <span class="qgw__dt">Last 30d sales:</span>\n        <span class="qgw__dd">-</span>\n      </div>\n      <div>\n        <span class="qgw__dt">Rating(avg/total):</span>\n        <span class="qgw__dd">loading...</span>\n        <span class="qgw__label qgw__trustl2">\n      <span class="qgw__loader qgw__loader__prev"><img src="${n("assets/img/loader.gif")}" /></span>\n        </span>\n      </div>\n  <div class="qgw__group">\n    <div>\n      <span class="qgw__dt">FBA Fees:</span>\n      <span class="qgw__dd">${e?.data?.fbafees??"-"}</span>\n    </div>\n    <div>\n      <span class="qgw__dt">Variations:</span>\n      <span class="qgw__dd">${e?.data?.variations??"1"}</span>\n    </div>\n  </div>\n    </div>\n  <div class="qgw__nav">\n    <a href="#">Ads Insights</a>\n    <a href="#">1688</a>\n    <a href="#">Alibaba</a>\n    <a href="#">Aliexress.com</a>\n  </div>\n      </div>\n            `,t}function i(e){let t=window?.gwApp?.asin_trust||{};const a=document.createElement("div");return a.setAttribute("data-type","content"),a.classList.add("qgw","qfixgw"),!0===e.data.isError?a.innerHTML='\n        <div class="qgw__error">\n          <span>fetching product info error</span>\n          <a href="#">learn more</a>\n        </div>\n        ':a.innerHTML=`\n        <div class="qgw__dl">\n          <div>\n            <span class="qgw__dt">ASIN:</span>\n            <span class="qgw__dd" data-part="asin">${e?.asin||"-"}</span>\n          </div>\n          <div>\n            <span class="qgw__dt">LQS:</span>\n            <span class="qgw__dd">${e?.data?.lqs??"-"}</span>\n          </div>\n\n          <div>\n            <span class="qgw__dt">Weight:</span>\n            <span class="qgw__dd">${e?.data?.ms?.weight??"-"}</span>\n          </div>\n          <div>\n            <span class="qgw__dt">Rel. date:</span>\n            <span class="qgw__dd">${e?.data?.date??"-"}</span>\n          </div>\n          <div>\n            <span class="qgw__dt">Last 30d sales:</span>\n            <span class="qgw__dd">-</span>\n          </div>\n          <div>\n            <span class="qgw__dt">Rating(avg/total):</span>\n            <span class="qgw__dd">${e?.data?.rating_avg||0}<span class="qgw__rttot">(${e?.data?.ratings_total||0})</span></span>\n            <span class="qgw__label qgw__trustl2">\n\n        ${t&&t[e?.asin]?`<span class="qgw__trustl2w ${t[e?.asin]?"qgw__trustl2w__"+t[e?.asin][0]:""}"> <span>${t[e?.asin][0]}</span></span>`:`<span class="qgw__loader"><img src="${n("assets/img/loader.gif")}" /></span>`}\n            </span>\n          </div>\n      <div class="qgw__group">\n        <div>\n          <span class="qgw__dt">FBA Fees:</span>\n          <span class="qgw__dd">${e?.data?.fbafees??"-"}</span>\n        </div>\n        <div>\n          <span class="qgw__dt">Variations:</span>\n          <span class="qgw__dd">${e?.data?.variations??"1"}</span>\n        </div>\n      </div>\n        </div>\n      <div class="qgw__nav">\n        <a href="#">Ads Insights</a>\n        <a href="#">1688</a>\n        <a href="#">Alibaba</a>\n        <a href="#">Aliexress.com</a>\n      </div>\n    `,a}let o,l;function c(){d();let n=[...document.querySelectorAll('[data-component-type="s-search-result"]')].filter((n=>!n.classList.contains("AdHolder"))).map((n=>n.getAttribute("data-asin")||[]));n.length&&(v(n),async function(n){let e=n.join(",");if(e!==y){if(y=e,!n||!n.length)throw new Error("No data received in fetchASINTrust (asin argument)");const t=Date.now();if(t-x<1)return;async function a(){const n={asins:e,tld:"com"};try{const e=await fetch("https://trustwerty.com/api/bulk-asins",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(e.ok)return await e.json();throw new Error("Network response was not ok.")}catch(n){return r(n)}}x=t;let s=3;async function r(n){if(s>0)return s--,a();throw new Error("Maximum retry limit reached.",n)}return a()}}(n).then((n=>{var e;(e=n)&&Object.keys(e).forEach((n=>{window.gwApp?window.gwApp={...window.gwApp,asin_trust:{...e}}:window.gwApp={asin_trust:{...e}};const t=document.querySelector(`[data-asin="${n}"] .${s} `),a=t?.querySelector(".qgw__loader")&&!t.querySelector(".qgw__loader__prev");if(t&&a){let a=`<span class="qgw__trustl2w ${e[n]?"qgw__trustl2w__"+e[n][0]:""}"> <span>${e[n][0]}</span></span> `,s=t?.querySelector(".qgw__trustl2");s&&(s.innerHTML=a)}}))})))}function d(){const n=[...document.querySelectorAll('[data-component-type="s-search-results"] .s-result-list> [data-component-type="s-search-result"]')].filter((n=>!n.classList.contains("AdHolder"))).map((n=>n.getAttribute("data-asin"))),e=n.filter(((e,t)=>e&&n.indexOf(e)===t));e.length>0&&S.storage.local.get("gpCache",(n=>{(n?.gpCache||[]).filter((n=>e.includes(n?.asin))).forEach((n=>{p(n)}))}))}function p(n){let e=`[data-component-type="s-search-results"] .s-result-list> [data-component-type="s-search-result"][data-asin="${n.asin}"] .${s} `;if(!("true"===document.querySelector(e)?.getAttribute("data-initialized"))){q(i(n),0,[e])}}t(a,r(),s,['.s-result-list>[data-component-type="s-search-result"] .puis-card-container'],!0),S.storage.local.onChanged.addListener(((n,e)=>{if(n.gpCache&&n.gpCache.newValue){const e=(t=n.gpCache.newValue,JSON.stringify(t));e===o&&function(n,e){const t=Object.keys(n),a=Object.keys(e);if(t.length!==a.length)return!1;for(let a of t)if(n[a]!==e[a])return!1;return!0}(n.gpCache.newValue,l)||(o=e,l=n.gpCache.newValue,d())}var t})),d(),document.addEventListener("DOMContentLoaded",c),e('[data-component-type="s-search-results"] .s-result-list> [data-component-type="s-search-result"]',c)}}const L=chrome||browser;let A=[];const M=chrome||browser;function T(){M.storage.local.get("gpState",(s=>{M.storage.sync.get("cookies_gal20",(r=>{let i;i=!0!==r?.cookies_gal20||s.gpState.disabled?{disabled:!0}:s.gpState,!i.disabled&&i&&(k(i.quick_view),function(e){const s=document.createElement("div"),r="ov__465787af-c5ad-4048-895c-0ed384357148_gw",i=document.querySelectorAll("."+r)?.length;function o(n){"gw__overlay-button"===n.target.id&&a("content/preferences.html",r,!0)}e&&!i?(s.innerHTML=`<div id="gw__overlay"><button id="gw__overlay-button"><span>Open Settings</span><img src="${n()}"></button><style>\n    #gw__overlay {\n      position: fixed;\n      bottom: 10vh;\n      right: -60px;\n      width: 102px;\n      background: #353c40;\n      \n      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",\n        "Helvetica Neue", sans-serif;\n      border-top-left-radius: 14px;\n      border-bottom-left-radius: 14px;\n      cursor: pointer;\n      font-size: 12px;\n      opacity: 1;\n      transition: transform 400ms ease, opacity 400ms ease 0ms;\n      z-index: 10000;\n    }\n\n    #gw__overlay:hover {\n      opacity: 0.8;\n      transform: translateX(-60px);\n    }\n\n    #gw__overlay-button {display: flex;align-items: center;justify-content: flex-end;flex-direction: row-reverse;height: 42px;}#gw__overlay img,#gw__overlay span {pointer-events: none;user-select: none;}#gw__overlay span {margin-right: 5px;}#gw__overlay img {width: 34px;height: 34px;margin: 4px;}#gw__overlay-button {color: #fff;background: none;border: none;padding: 0;cursor: pointer;} </style></div>`,document.removeEventListener("click",o),document.addEventListener("click",o)):document.removeEventListener("click",o),t(e,s,r,"root")}(!i.disabled),function(e){let a,s=0;const r=4,i=chrome||browser,o={browser_cr:"https://browser_crwebstore.google.com/detail/ijkboaojikgaanlgigobkmbpnjgjljnc/reviews/write",firefox:"https://addons.mozilla.org/en-US/firefox/addon/GwardaApp/reviews/",edge:"https://browser_crwebstore.google.com/detail/ijkboaojikgaanlgigobkmbpnjgjljnc/reviews/write",opera:"https://browser_crwebstore.google.com/detail/ijkboaojikgaanlgigobkmbpnjgjljnc/reviews/write"},l="ext_show__edf3235a-d1d3-4d2d-8c15-76ce4202c010__gw",c=document.querySelectorAll("."+l)?.length;if(e&&!c){let d=u(),p=g();function u(){const n=navigator.userAgent;return n.includes("Edg")?"edge":n.includes("OPR")?"opera":n.includes("browser_cr")?"browser_cr":n.includes("Firefox")?"firefox":"browser_cr"}function g(){let e=n();const t=document.createElement("div");return t.innerHTML=`\n      <div id="ext_show"><div><div class="groupl">${e?`<img src = "${e}" alt = "logo" /> `:""}\n      <h1>It would really help.</h1></div><p>If you enjoy using this extension,\n      would you mind rate it on the webstore,\n      then?</p><a href="${o[d]}" target="_blank" id="rateLink" data-action="RATE">Rate it</a><div class="cls"><span id="closeNotification" data-action="CLOSE" style="cursor: pointer;">No,\n      Thanks</span></div></div></div><style id="43ggfdbt5rf">#ext_show img,\n      #ext_show p {\n        user-select: none;\n        pointer-events: none;\n      }\n\n      #ext_show h1 {\n        display: block;\n        text-align: left;\n        color: #ffffff !important;\n        font-weight: 600;\n        font-weight: 500;\n        font-size: 21px;\n        line-height: 21px;\n        margin: 0;\n      }\n\n      #ext_show .groupl {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin: 10px 0 10px -5px;\n      }\n\n      #ext_show h1.first {\n        margin-bottom: 5px;\n      }\n\n      #ext_show p {\n        max-width: 290px;\n        font-size: 14px;\n        font-size: 12.8px;\n        font-weight: 400;\n        margin: 8px 0 16px;\n        color: #868b90 !important;\n        line-height: 140%;\n        text-align: center;\n      }\n\n      #ext_show a {\n        text-decoration: none !important;\n        display: block;\n        border: 1px solid rgb(68, 86, 91, 0.5);\n        border-radius: 22px;\n        padding: 7px 10px;\n        margin: 10px auto;\n        max-width: 270px;\n        background-color: rgba(255, 255, 255, 0.16) !important;\n        color: white !important;\n        text-align: center;\n        font-size: 14px;\n        font-size: 14.5px;\n      }\n\n      #ext_show a:hover {\n        text-decoration: none;\n        background-color: rgba(255, 255, 255, 0.1) !important;\n      }\n\n      #ext_show a:focus {\n        text-decoration: none;\n      }\n\n      #ext_show>div {\n        transform: scale(1);\n        box-shadow: rgba(0, 0, 0, 0.8) 0px 8px 24px;\n        z-index: 100000 !important;\n        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;\n        width: 296px;\n        position: fixed;\n        top: 10px;\n        right: 10px;\n        background-color: #161515 !important;\n        background-color: rgb(22, 21, 21, 0.96) !important;\n        padding: 5px 12px 8px;\n        box-sizing: border-box;\n        border: 1px solid rgb(68, 86, 91, 0.5);\n        z-index: 100;\n        border-radius: 12px\n      }\n\n      #ext_show img {\n        margin-right: 10px;\n        height: 33px;\n        width: auto;\n        max-width: 40px;\n        box-shadow: 0 2px 2px 2px rgb(33, 33, 30, 0.15);\n      }\n\n      #ext_show .cls {\n        display: flex;\n        justify-content: center;\n      }\n\n      #closeNotification {\n        display: inline-block;\n        margin: 0 auto;\n        padding-left: 4px;\n        text-align: center;\n        font-size: 11px;\n        font-size: 10.5px;\n        color: #72767a !important;\n      }\n\n      #closeNotification:hover {\n        text-decoration: underline;\n      }\n\n      </style>\n        `,t.removeEventListener("click",_),t.addEventListener("click",_),t}function _(n){switch(n.target.getAttribute("data-action")){case"RATE":i.storage.local.set({closeCount:r+1}),p.style.display="none";break;case"CLOSE":i.storage.local.set({closeCount:s+1}),p.style.display="none"}}d&&o[d]&&(i.storage.local.set({closeCount:0}),i.storage.local.get("closeCount",(({closeCount:n})=>{const e=!n||n<r;s=n||0,clearTimeout(a),a=setTimeout((function(){t(e,p,l,"root")}),1e13)})))}}(!i.disabled),function(e){const s="kwbtn_4ee3ec19-45e2-40a6-bc69-47604bf491928__gw";function r(n){let e=new URLSearchParams(window.location.search).get("k"),t=window.location.hostname.replace(/^www\./,"");("keywordsgws"===n.target.id||n.target.closest("#keywordsgws"))&&a(`content/keywords.html?k=${e??""}&mp=${t??""}`,s,!0)}t(e,function(){const e=document.createElement("div");let t=n();return e.innerHTML=`<button class="keywordsgws__btn" id="keywordsgws"><div class="keywordsgws__logo"><img src="${t}" alt="Logo"></div><span>Generate Keywords</span></button>`,e.classList.add(s),document.removeEventListener("click",r),document.addEventListener("click",r),e}(),s,['span[data-component-type="s-messaging-widget-results-header"]'],!0)}(i.gn_keywords),async function(a){const s="lfmz_d6b368ee-947a-47a4-b8fc-c791acca1843__gw";if(window.location.pathname&&"/"!==window.location.pathname&&"/s"!==window.location.pathname){function r(){u(null,[],document,20,20).then((n=>{o(n)})).catch((n=>{}))}function i(e){const t=document.createElement("div");return n(),t.innerHTML=`\n    <div class="lqswlx qfixgw">\n    <button class="lqswlx__btn">\n      <div class="lqswlx__logo">\n        <img src="${n()}" alt="Logo"/>\n  \n      </div>\n      <div class="lqswlx__btn-content">\n      <span class="lqswlx__btn__vals ${e?.description?"":" skeletonls"}">\n        <span class="lqswlx__lab">LQS:</span>\n        <span class="lqswlx__value">${e?.lqs??"- "}</span>\n        <span class="lqswlx__tot">/ 10</span>\n        </span>\n      </div>\n    </button>\n    <div class="lqswlx__content__wrapper">\n    <div class="lqswlx__content  ${e?.description?"":" skeletoned"}">\n    <div class="lqswlx__group">\n      <h3 class="lqswlx__title"><span>Listing Text</span></h3>\n      <table>\n        <tr>\n          <td><span>Title:</td></span>\n          <td><span>${e?.title?e.title+" chars":"Error"}</td></span>\n          <td><span>More than 80 characters, up to 200. <a class="lb" href="">Learn More</a></td></span>\n        </tr>\n        <tr>\n          <td><span>Description:</td></span>\n          <td><span>${e?.description?(e.description>2500?"2500+":e.description)+" chars":"Error"}</td></span>\n          <td><span>More than 1000 characters, up to 2500. <a href="">Learn More</a></td></span>\n        </tr>\n        <tr>\n          <td><span>Bullets:</td></span>\n          <td><span>${e?.bullets??"0"}</td></span>\n          <td><span>Minimum 5 bullet points.<a href="">Learn More</a></td></span>\n        </tr>\n      </table>\n    </div>\n    <div class="lqswlx__group">\n      <h3 class="lqswlx__title"><span>Product Images</span></h3>\n      <table>\n        <tr>\n          <td><span>Images:</td></span>\n          <td><span>${e?.images_total??"Error"}</td></span>\n          <td><span>At least 4 High Quality images.<a href="">Learn More</a></td></span>\n        </tr>\n        <tr>\n          <td><span>Main Image Background:</td></span>\n          <td><span>${e?.main_bg??"unknown"}</td></span>\n          <td><span>Main image on a transparent / white background.<a href="">Learn More</a></td></span>\n        </tr>\n        <tr>\n          <td><span>Image Dimensions:</td></span>\n          <td><span>${e?.main_dimensions??"unknown"}</td></span>\n          <td><span>Bigger side at least 1420 pixels. ~ 72 DPI <a href="">Learn More</a></td></span>\n        </tr>\n        <tr>\n        <td><span>Brand Content:</td></span>\n        <td><span>${e?.brand_content??"0"}</td></span>\n        <td><span>Description contain at least 1 image</td></span>\n      </tr>\n      </table>\n    </div>\n    <div class="lqswlx__group">\n      <h3 class="lqswlx__title"><span>Reviews</span></h3>\n      <table>\n        <tr>\n          <td><span>Rating:</td></span>\n          <td><span>${e?.rating_avg??"unknown"}</td></span>\n          <td><span>Rating 4.0 or more.<a href="" class="lb">Learn More</a></td></span>\n        </tr>\n        <tr>\n          <td><span>Number of ratings:</td></span>\n          <td><span>${e?.ratings_total??"unknown"}</td></span>\n          <td><span>20 or above.\n        </tr>\n      </table>\n    </div>\n  </div></div>\n  </div>\n    `,t.classList.add(s),t}function o(n){let e=i(n);t(a,e,s,["#titleSection"],!1,!0)}o(),r(),document.addEventListener("DOMContentLoaded",r),e("#titleSection",r)}}(i.lqs),function(e){const a="stls_27cf0cfa-fdc3-4bbb-bb12-057220a13c2b__gw";if(window.location.pathname&&"/"!==window.location.pathname&&"/s"!==window.location.pathname){function s(e){const t=document.createElement("div");let s=n();return t.innerHTML=`\n<div class="stwsl">\n  <div class="stwsl__header">\n    <div class="stwsl__logo">\n    <img src=${s} alt="Logo"/>\n    </div>\n    <div class="stwsl__title">GwardaApp Stocks Status</div>\n    <div class="stwsl__val">\n    </div>\n  </div>\n  <div class="stwsl__content" data-type="content">\n    <span class="qgw__loader qgw__loader__prev qgw__loader__full"><img src="${n("assets/img/loader.gif")}" /></span>\n  </div>\n  <span class="stwsl__sub"><div>Looking for lowest price?<div><div>Try <a href="#">search by images</a></div></span>\n</div>\n    `,t.classList.add(a),t}function r(n){const e=document.createElement("div");return e.setAttribute("data-type","content"),e.classList.add("stwsl__content"),e.innerHTML=n.map((n=>n?.label?`\n    <a href="${n?.link}" target="_blank" title="Seller: ${n.label}" class="stwsl__item">\n      <div class="stwsl__name">${n.label}</div>\n      <div class="stwsl__price">\n        <span class="stwsl__price__currency">${n.price??"-"}</span>\n      </div>\n      <div class="stwsl__total">${n.stock?1===n.stock?n.stock+" ":n.stock-1+"+":"0 "}</div>\n    </a>\n    `:"")).join(""),e.innerHTML||(e.innerHTML='<span class="qgw__loader qgw__loader__prev qgw__loader__full">not found</span>'),e}const i=new DOMParser;async function o(n){A&&0!==Object.keys(A).length||!n||await L.runtime.sendMessage({action:"fetchStocks",arr:[n]},(async n=>{l(i.parseFromString(n,"text/html"))}))}function l(n=document){const e=[...n.querySelectorAll("#aod-sticky-pinned-offer"),...n.querySelectorAll("#aod-offer")],t=[];e.forEach((n=>{let e=n?.querySelector('[data-action="aod-atc-action"]')?.getAttribute("data-aod-atc-action")?.split(",")?.filter((n=>n&&n?.startsWith('"asin"')))[0]?.split(":")[1]?.replace(/\\/g,"")||null;e&&t.push({asin:e,label:n?.querySelector("#aod-offer-soldBy a")?.innerText?.trim()||null,link:n?.querySelector("#aod-offer-soldBy a")?.href||null,stock:n?.querySelectorAll("#aod-qty-dropdown-scroller > span").length,price:n?.querySelector(".a-offscreen")?.innerHTML||null})})),A=[...t],c(A)}function c(n){let e=`#rightCol .${a}`;"true"!==document.querySelector(e)?.getAttribute("data-initialized")&&q(r(n),0,[e])}t(e,s(),a,["#rightCol"],!1),A?.length&&c(A);const d=window?.location?.href?.split("/dp/product/")[1]?.split("/")[0]?.substring(0,10)||window?.location?.href?.split("/gp/product/")[1]?.split("/")[0]?.substring(0,10)||window?.location?.href?.split("/dp/product/")[1]?.split("?ref")[0]?.substring(0,10)||window?.location?.href?.split("/gp/product/")[1]?.split("?ref")[0]?.substring(0,10)||window?.location?.href?.split("/gp/")[1]?.split("/")[0]?.substring(0,10)||window?.location?.href?.split("/dp/")[1]?.split("/")[0]?.substring(0,10)||window?.location?.href?.split("/gp/")[1]?.split("?ref")[0]?.substring(0,10)||window?.location?.href?.split("/dp/")[1]?.split("?ref")[0]?.substring(0,10)||null;e&&d&&o(d)}}(i.stock_status))}))}))}function $(){T()}let E;$(),M.storage.local.onChanged.addListener((n=>{let e=JSON.stringify({...n?.gpState?.newValue}).replace(/\s/g,"");n?.gpState?.newValue&&e!==E&&(E=e,$())}))}();
