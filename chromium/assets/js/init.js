//   - This file is part of GwardaApp Extension
//  <https://github.com/gerwld/GwardaApp-extension/blob/main/README.md>,
//   - Copyright (C) 2023-present GwardaApp Extension
//   -
//   - GwardaApp Extension is a software: you can redistribute it, but you are not allowed to modify it under the terms of the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) License.
//   -
//   - GwardaApp Extension is distributed in the hope that it will be useful,
//   - but WITHOUT ANY WARRANTY; without even the implied warranty of
//   - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//   - Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) License for more details.
//   -
//   - You should have received a copy of the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) License
//   - along with GwardaApp Extension.  If not, see <https://creativecommons.org/licenses/by-nc-nd/4.0/>.

// Note: Amazon is a registered trademark of Amazon and all related Marks are Trademarks of Amazon.com, Inc. or its affiliates. This extension is not affiliated with or endorsed by Amazon.com, Inc or / and its affiliates.

(()=>{"use strict";const a=chrome||browser;let s;const c={};async function n(e){s=e,document.documentElement.setAttribute("lang",e);var t=e;try{var a=await(await fetch(`/_locales/${t}/messages.json`)).json();c[t]=a}catch(e){}await 0;var n=e,o=document.querySelectorAll("[data-i18n]");for(let e=0;e<o?.length;e++){var l=o[e].getAttribute("data-i18n"),l=c[n]?.[l]?.message;l?.length&&("i18n"===o[e].value?o[e].value=l:o[e].innerText=l)}}a.storage.local.get("gpState",e=>{e.gpState.dark_mode?document.documentElement.classList.add("dark_mode"):document.documentElement.classList.remove("dark_mode")}),a.storage.onChanged.addListener(async(e,t)=>{"local"===t&&e.gpState&&e.gpState?.newValue&&e.gpState.newValue.lang_set&&(t=e.gpState.newValue.lang_set)!==s&&await n(t)});const o=["en","de"],l=navigator?.language?.split("-")[0]?.toLowerCase()||"en";a.storage.local.get("gpState",async e=>{var t=e?.gpState?.lang_set?e.gpState.lang_set:l&&-1!==o.indexOf(l)?l:"en";e?.gpState?.lang_set||a.storage.local.set({gpState:{...e.gpState,lang_set:t}}),await n(t)})})(),(()=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{const a=chrome||browser,e=document.getElementById("header_nav"),n=document.getElementById("lang_set");let o,l=!1;a.storage.local.onChanged.addListener((e,t)=>{e.gpState&&e.gpState?.newValue&&JSON.stringify({...e.gpState.newValue})!==o&&(o=JSON.stringify({...e.gpState.newValue}),l||(l=!0,setTimeout(()=>{l=!1,c()},30)))});const t=new CustomEvent("gpStateChange");function s(){window.dispatchEvent(t)}function c(){new Promise(t=>{a.storage.local.get(null,e=>{e=e?.gpState||{};t(e)})}).then(t=>{n&&(t.lang_set,n.value=t.lang_set,n?.addEventListener("change",function(e){t.lang_set=e.target.value||"en",a.storage.local.set({gpState:t},s)})),e.addEventListener("click",function(e){(e=e.target.getAttribute("data-action"))&&(t[e]=!t[e]),a.storage.local.get(null,e=>{a.storage.local.set({...e,gpState:{...t}},s)})}),t&&(t.dark_mode?document.documentElement.classList.add("dark_mode"):document.documentElement.classList.remove("dark_mode"),t.disabled?document.body.classList.add("disabled"):document.body.classList.remove("disabled"))})}c()})})(),document.addEventListener("DOMContentLoaded",()=>{function s(a){var e=document.querySelectorAll(".select-items"),t=document.querySelectorAll(".select-selected");const n=Array.from(t).map((e,t)=>a==e?t:-1).filter(e=>-1!==e);e.forEach((e,t)=>{n.includes(t)||e.classList.add("select-hide")}),t.forEach((e,t)=>{n.includes(t)||e.classList.remove("select-arrow-active")})}function c(e,t,a,n){a=a.options[a.selectedIndex];t.innerHTML=a?a.innerHTML:"";const o=a?a.value:"";a=Array.from(n).find(e=>e.getAttribute("data-value")===o);a&&e.insertBefore(a.cloneNode(!0),t)}document.querySelectorAll(".custom-select").forEach(e=>{{const t=e.querySelector("select");if(t){const o=e.querySelectorAll(".hidden img"),a=document.createElement("DIV"),n=(a.setAttribute("class","select-selected"),document.createElement("SPAN")),l=(a.appendChild(n),e.appendChild(a),document.createElement("DIV"));l.setAttribute("class","select-items select-hide"),Array.from(t.options).slice(1).forEach((t,e)=>{var a=document.createElement("DIV"),n=(a.innerHTML=t.innerHTML,a.setAttribute("data-value",t.value),Array.from(o).find(e=>e.getAttribute("data-value")===t.value));n&&a.insertBefore(n.cloneNode(!0),a.firstChild),a.addEventListener("click",function(e){var e=e.target,t=e.parentNode.parentNode.querySelector("select"),a=e.parentNode.previousSibling;t.value=e.getAttribute("data-value"),a.innerHTML=e.innerHTML,s(a)}),l.appendChild(a)}),e.appendChild(l),a.addEventListener("click",function(e){e.stopPropagation(),s(a),l.classList.toggle("select-hide"),a.classList.toggle("select-arrow-active")}),t.addEventListener("change",function(){c(a,n,t,o)}),c(a,n,t,o)}}}),document.addEventListener("click",()=>s(null))}),(()=>{"use strict";document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('[data-attr="smart-link"]').forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),t=window.open(e,"_blank");t&&!t.closed&&void 0!==t.closed||(window.location.href=e)})})})})();