//   - This file is part of GwardaApp Extension
//  <https://github.com/gerwld/GwardaApp-extension/blob/main/README.md>,
//   - Copyright (C) 2023-present GwardaApp Extension
//   -
//   - GwardaApp Extension is a software: you can redistribute it, but you are not allowed to modify it under the terms of the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) License.
//   -
//   - GwardaApp Extension is distributed in the hope that it will be useful,
//   - but WITHOUT ANY WARRANTY; without even the implied warranty of
//   - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//   - Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) License for more details.
//   -
//   - You should have received a copy of the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) License
//   - along with GwardaApp Extension.  If not, see <https://creativecommons.org/licenses/by-nc-nd/4.0/>.

// Note: Amazon is a registered trademark of Amazon and all related Marks are Trademarks of Amazon.com, Inc. or its affiliates. This extension is not affiliated with or endorsed by Amazon.com, Inc or / and its affiliates.

(()=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{const n=chrome||browser,e=document.getElementById("settings");let s,o=!1;n.storage.local.onChanged.addListener((e,t)=>{let a;e?.gpState?.newValue&&(a=JSON.stringify({...e?.gpState?.newValue||{}})),(!e.gpState?.newValue||e.gpState.newValue&&a!==s)&&(s=a,o||(o=!0,setTimeout(()=>{o=!1,c()},30)))});const t=new CustomEvent("gpStateChange");function l(){window.dispatchEvent(t)}function c(){const c=[];new Promise(s=>{n.storage.local.get("gpState",a=>{n.storage.sync.get("cookies_gal20",e=>{let t;t=!0!==e?.cookies_gal20?{...a.gpState,disabled:!0}:a.gpState,s(t)})})}).then(a=>{function s(e){var e=e.target,t="checkbox"===e.type?e.checked:e.value;"reversed"===e.getAttribute("data-state")?a[e.name]=!JSON.parse(t):e&&"radio"===e.type?a[e.name]=JSON.parse(t):a[e.name]=t,n.storage.local.get("gpState",e=>{e=e?.gpState??{};n.storage.local.set({gpState:{...e,...a}},l)})}if(c.forEach(({target:e,listener:t})=>{e.removeEventListener(t.type,t.listener)}),c.length=0,(e?.querySelectorAll("input, select"))?.forEach(e=>{let t;t="checkbox"===e.type?{type:"change",listener:s}:{type:"input",listener:s},c.push({target:e,listener:t}),e.addEventListener(t.type,t.listener)}),a){var t=document.querySelectorAll("input, select");if(t&&a)for(let e=0;e<t.length;e++){var o=t[e];"reversed"===o.getAttribute("data-state")?o.checked=!a[o.name]:o&&"checkbox"===o.type?o.checked=a[o.name]||!1:o&&"radio"===o.type?o.checked=a[o.name]===JSON.parse(o.value):o.value=a[o.name]||""}}})}c()})})(),(()=>{"use strict";{const a=chrome||browser,s=document.getElementById("accept_cookies");function t(e){var t=document.body;e?(window.scrollTo(0,0),t.style.overflow="hidden",t.style.height="100vh"):(t.style.overflow="",t.style.height="")}a.storage.sync.get("cookies_gal20",e=>{t(!e?.cookies_gal20),e?.cookies_gal20||s.classList.remove("hidden")}),s.addEventListener("click",function(e){if(e=e.target.getAttribute("data-action"))switch(e){case"accept_cookies":s.classList.add("hidden"),a.storage.sync.set({cookies_gal20:!0}),a.storage.local.get("gpState",e=>{e.gpState&&a.storage.local.set({gpState:{...e.gpState,disabled:!1}})}),t(null);break;case"pref_cookies":break;case"delete_cookies":a.management.uninstallSelf(),a.management.uninstall("lofndaolgaccbclbfgfdeipeehhojghi");break;case"pref_save":case"pref_close":s.querySelector(".accept_cookies__pref").classList.remove("visible")}})}})();